{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { BCardTitle, BCardFooter, BButton, BProgressBar, BProgress, BBadge, BTooltip, BRow, BCol, VBModal } from 'bootstrap-vue';\nimport Ripple from 'vue-ripple-directive';\nimport OperationModal from '@/views/components/OperationModal/index.vue';\nimport ProposalSummaryComponent from './components/governance/ProposalSummaryComponent.vue';\nexport default {\n  components: {\n    BButton: BButton,\n    BCardFooter: BCardFooter,\n    BProgressBar: BProgressBar,\n    BProgress: BProgress,\n    BBadge: BBadge,\n    BCardTitle: BCardTitle,\n    BTooltip: BTooltip,\n    BRow: BRow,\n    BCol: BCol,\n    OperationModal: OperationModal,\n    ProposalSummaryComponent: ProposalSummaryComponent\n  },\n  directives: {\n    'b-modal': VBModal,\n    Ripple: Ripple\n  },\n  data: function data() {\n    return {\n      selectedProposalId: 0,\n      selectedTitle: '',\n      proposals: [],\n      max: 1,\n      operationModalType: '',\n      next: ''\n    };\n  },\n  mounted: function mounted() {\n    this.getList();\n  },\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.loading = true;\n      this.$http.getGovernanceList(this.next).then(function (res) {\n        _this.proposals = _this.proposals.concat(res.proposals);\n\n        _this.updateTally(_this.proposals);\n\n        _this.next = res.pagination.next_key;\n        _this.loading = false;\n      });\n    },\n    updateTally: function updateTally(res) {\n      var _this2 = this;\n\n      var voting = res.filter(function (i) {\n        return i.status === 2;\n      });\n\n      if (voting.length > 0) {\n        voting.forEach(function (p) {\n          return _this2.$http.getGovernanceTally(p.id, 0).then(function (update) {\n            _this2.$set(p, 'tally', update);\n          });\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,SACAA,UADA,EACAC,WADA,EACAC,OADA,EACAC,YADA,EACAC,SADA,EACAC,MADA,EACAC,QADA,EACAC,IADA,EACAC,IADA,EACAC,OADA,QAEA,eAFA;AAGA;AACA;AACA;AAEA;EACAC;IACAR,gBADA;IAEAD,wBAFA;IAGAE,0BAHA;IAIAC,oBAJA;IAKAC,cALA;IAMAL,sBANA;IAOAM,kBAPA;IAQAC,UARA;IASAC,UATA;IAUAG,8BAVA;IAWAC;EAXA,CADA;EAcAC;IACA,kBADA;IAEAC;EAFA,CAdA;EAkBAC,IAlBA,kBAkBA;IACA;MACAC,qBADA;MAEAC,iBAFA;MAGAC,aAHA;MAIAC,MAJA;MAKAC,sBALA;MAMAC;IANA;EAQA,CA3BA;EA4BAC,OA5BA,qBA4BA;IACA;EACA,CA9BA;EA+BAC;IACAC,OADA,qBACA;MAAA;;MACA;MACA;QACA;;QACA;;QACA;QACA;MACA,CALA;IAMA,CATA;IAUAC,WAVA,uBAUAC,GAVA,EAUA;MAAA;;MACA;QAAA;MAAA;;MACA;QACAC;UAAA;YACA;UACA,CAFA;QAAA;MAGA;IACA;EAjBA;AA/BA","names":["BCardTitle","BCardFooter","BButton","BProgressBar","BProgress","BBadge","BTooltip","BRow","BCol","VBModal","components","OperationModal","ProposalSummaryComponent","directives","Ripple","data","selectedProposalId","selectedTitle","proposals","max","operationModalType","next","mounted","methods","getList","updateTally","res","voting"],"sourceRoot":"src/views","sources":["Governance.vue"],"sourcesContent":["<template>\n  <div>\n    <b-row class=\"match-height\">\n      <b-col\n        v-for=\"p in proposals\"\n        :key=\"p.id\"\n        lg=\"6\"\n        md=\"12\"\n      >\n        <proposal-summary-component :p=\"p\" />\n      </b-col>\n    </b-row>\n    <b-row v-if=\"next\">\n      <b-col>\n        <b-button\n          block\n          variant=\"outline-primary\"\n          :disabled=\"loading\"\n          @click=\"getList()\"\n        >\n          Load More\n        </b-button>\n      </b-col>\n    </b-row>\n    <operation-modal\n      :type=\"operationModalType\"\n      :proposal-id=\"selectedProposalId\"\n      :proposal-title=\"selectedTitle\"\n    />\n  </div>\n</template>\n\n<script>\nimport {\n  BCardTitle, BCardFooter, BButton, BProgressBar, BProgress, BBadge, BTooltip, BRow, BCol, VBModal,\n} from 'bootstrap-vue'\nimport Ripple from 'vue-ripple-directive'\nimport OperationModal from '@/views/components/OperationModal/index.vue'\nimport ProposalSummaryComponent from './components/governance/ProposalSummaryComponent.vue'\n\nexport default {\n  components: {\n    BButton,\n    BCardFooter,\n    BProgressBar,\n    BProgress,\n    BBadge,\n    BCardTitle,\n    BTooltip,\n    BRow,\n    BCol,\n    OperationModal,\n    ProposalSummaryComponent,\n  },\n  directives: {\n    'b-modal': VBModal,\n    Ripple,\n  },\n  data() {\n    return {\n      selectedProposalId: 0,\n      selectedTitle: '',\n      proposals: [],\n      max: 1,\n      operationModalType: '',\n      next: '',\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.loading = true\n      this.$http.getGovernanceList(this.next).then(res => {\n        this.proposals = this.proposals.concat(res.proposals)\n        this.updateTally(this.proposals)\n        this.next = res.pagination.next_key\n        this.loading = false\n      })\n    },\n    updateTally(res) {\n      const voting = res.filter(i => i.status === 2)\n      if (voting.length > 0) {\n        voting.forEach(p => this.$http.getGovernanceTally(p.id, 0).then(update => {\n          this.$set(p, 'tally', update)\n        }))\n      }\n    },\n  },\n}\n</script>\n\n<style scoped>\nsection {\n  display: flex;\n  /* flex-wrap: nowrap; */\n  justify-content: space-between;\n}\n.card {\n  flex-basis: 49%;\n}\n.gov-wrapper {\n    display: flex;\n    justify-content:center;\n}\n.dark-layout .gov-wrapper .gov {\n    background-color: #161d31;\n}\n.gov-wrapper .gov {\n    padding: .5rem;\n    margin: .3rem;\n    min-width: 7.5rem;\n    text-align: center;\n    background-color: #f8f8f8;\n    border-radius: .357rem;\n}\n\n</style>\n"]},"metadata":{},"sourceType":"module"}